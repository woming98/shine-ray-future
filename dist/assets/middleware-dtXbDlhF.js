import{v as b}from"./index-BMvr2Q3z.js";const j=t=>{let s;const e=new Set,o=(l,u)=>{const d=typeof l=="function"?l(s):l;if(!Object.is(d,s)){const I=s;s=u??(typeof d!="object"||d===null)?d:Object.assign({},s,d),e.forEach(h=>h(s,I))}},a=()=>s,c={setState:o,getState:a,getInitialState:()=>f,subscribe:l=>(e.add(l),()=>e.delete(l))},f=s=t(o,a,c);return c},w=t=>t?j(t):j,E=t=>t;function x(t,s=E){const e=b.useSyncExternalStore(t.subscribe,b.useCallback(()=>s(t.getState()),[t,s]),b.useCallback(()=>s(t.getInitialState()),[t,s]));return b.useDebugValue(e),e}const R=t=>{const s=w(t),e=o=>x(s,o);return Object.assign(e,s),e},N=t=>t?R(t):R;function C(t,s){let e;try{e=t()}catch{return}return{getItem:a=>{var r;const v=f=>f===null?null:JSON.parse(f,void 0),c=(r=e.getItem(a))!=null?r:null;return c instanceof Promise?c.then(v):v(c)},setItem:(a,r)=>e.setItem(a,JSON.stringify(r,void 0)),removeItem:a=>e.removeItem(a)}}const H=t=>s=>{try{const e=t(s);return e instanceof Promise?e:{then(o){return H(o)(e)},catch(o){return this}}}catch(e){return{then(o){return this},catch(o){return H(o)(e)}}}},F=(t,s)=>(e,o,a)=>{let r={storage:C(()=>localStorage),partialize:n=>n,version:0,merge:(n,S)=>({...S,...n}),...s},v=!1,c=0;const f=new Set,l=new Set;let u=r.storage;if(!u)return t((...n)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),e(...n)},o,a);const d=()=>{const n=r.partialize({...o()});return u.setItem(r.name,{state:n,version:r.version})},I=a.setState;a.setState=(n,S)=>(I(n,S),d());const h=t((...n)=>(e(...n),d()),o,a);a.getInitialState=()=>h;let g;const O=()=>{var n,S;if(!u)return;const p=++c;v=!1,f.forEach(i=>{var m;return i((m=o())!=null?m:h)});const y=((S=r.onRehydrateStorage)==null?void 0:S.call(r,(n=o())!=null?n:h))||void 0;return H(u.getItem.bind(u))(r.name).then(i=>{if(i)if(typeof i.version=="number"&&i.version!==r.version){if(r.migrate){const m=r.migrate(i.state,i.version);return m instanceof Promise?m.then(_=>[!0,_]):[!0,m]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,i.state];return[!1,void 0]}).then(i=>{var m;if(p!==c)return;const[_,k]=i;if(g=r.merge(k,(m=o())!=null?m:h),e(g,!0),_)return d()}).then(()=>{p===c&&(y==null||y(g,void 0),g=o(),v=!0,l.forEach(i=>i(g)))}).catch(i=>{p===c&&(y==null||y(void 0,i))})};return a.persist={setOptions:n=>{r={...r,...n},n.storage&&(u=n.storage)},clearStorage:()=>{u==null||u.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>O(),hasHydrated:()=>v,onHydrate:n=>(f.add(n),()=>{f.delete(n)}),onFinishHydration:n=>(l.add(n),()=>{l.delete(n)})},r.skipHydration||O(),g||h},P=F;export{N as c,P as p};
