import{j as e,r as g}from"./index-BMvr2Q3z.js";import{u}from"./useStore-BLrCrgBZ.js";import{R as c,r as h,a as y,T as x,C as j,X as b,Y as f,B as k}from"./generateCategoricalChart-BxVAJV1Q.js";import{R as N,P as v,a as S,b as C,c as R,e as w,f as D,B,L,d as O}from"./RadarChart-Gd-HcmE4.js";import{C as n,B as T}from"./Button-pqDR0Cbl.js";import{B as P}from"./index-ma8y2xMM.js";import{D as K}from"./download-DcX4mJwW.js";import"./middleware-dtXbDlhF.js";import"./useGlobalUser-DSzfZyT8.js";import"./arrow-left-Op4CMYGn.js";import"./pen-tool-aHdskOzV.js";import"./award-CFhIG7Jo.js";function z({data:a}){const r=[{skill:"Reading",value:a.Reading,fullMark:100},{skill:"Writing",value:a.Writing,fullMark:100},{skill:"Listening",value:a.Listening,fullMark:100},{skill:"Speaking",value:a.Speaking,fullMark:100}];return e.jsx(c,{width:"100%",height:400,children:e.jsxs(N,{data:r,children:[e.jsx(v,{stroke:"#e5e7eb"}),e.jsx(S,{dataKey:"skill",tick:{fill:"#374151",fontSize:14}}),e.jsx(C,{angle:90,domain:[0,100],tick:{fill:"#6b7280",fontSize:12}}),e.jsx(R,{name:"能力值",dataKey:"value",stroke:"#10b981",fill:"#10b981",fillOpacity:.6}),e.jsx(h,{})]})})}const m=["#10b981","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#ec4899"];function E({data:a,type:r="bar"}){const i=Object.entries(a).map(([s,t])=>({name:s,value:t}));return r==="pie"?e.jsx(c,{width:"100%",height:300,children:e.jsxs(w,{children:[e.jsx(D,{data:i,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:t})=>`${s}: ${(t*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:i.map((s,t)=>e.jsx(y,{fill:m[t%m.length]},`cell-${t}`))}),e.jsx(x,{})]})}):e.jsx(c,{width:"100%",height:300,children:e.jsxs(B,{data:i,children:[e.jsx(j,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(b,{dataKey:"name",stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:12}}),e.jsx(f,{stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:12}}),e.jsx(x,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e.jsx(k,{dataKey:"value",fill:"#10b981",radius:[8,8,0,0]})]})})}function $({data:a}){return e.jsx(c,{width:"100%",height:300,children:e.jsxs(L,{data:a,children:[e.jsx(j,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(b,{dataKey:"date",stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:12}}),e.jsx(f,{domain:[0,100],stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:12}}),e.jsx(x,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},labelStyle:{color:"#374151"},itemStyle:{color:"#10b981"}}),e.jsx(h,{}),e.jsx(O,{type:"monotone",dataKey:"score",stroke:"#10b981",strokeWidth:2,dot:{fill:"#10b981",r:4},activeDot:{r:6}})]})})}function q(){const{getEnglishReport:a}=u(),[r,i]=g.useState("bar"),s=a(),t=()=>{const o=JSON.stringify(s,null,2),l=new Blob([o],{type:"application/json"}),p=URL.createObjectURL(l),d=document.createElement("a");d.href=p,d.download=`english-report-${new Date().toISOString().split("T")[0]}.json`,d.click()};return e.jsx("div",{className:"space-y-6",children:e.jsxs(n,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(P,{className:"w-6 h-6 text-emerald-600"}),"学习报告"]}),e.jsx(T,{variant:"secondary",onClick:t,icon:e.jsx(K,{className:"w-4 h-4"}),children:"导出报告"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"四大核心技能"}),e.jsx(n,{className:"p-6",children:e.jsx(z,{data:s.radarData})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"技能详细统计"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.entries(s.skillStats).map(([o,l])=>e.jsxs(n,{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:o}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"正确率："}),e.jsxs("span",{className:"font-medium text-emerald-600",children:[l.correctRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"平均用时："}),e.jsxs("span",{className:"font-medium text-gray-900",children:[l.averageTime,"秒"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"总题数："}),e.jsx("span",{className:"font-medium text-gray-900",children:l.totalQuestions})]})]})]},o))})]}),Object.keys(s.errorDistribution).length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"错误类型分布"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>i("bar"),className:`px-3 py-1 rounded text-sm transition-colors ${r==="bar"?"bg-emerald-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"柱状图"}),e.jsx("button",{onClick:()=>i("pie"),className:`px-3 py-1 rounded text-sm transition-colors ${r==="pie"?"bg-emerald-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"饼图"})]})]}),e.jsx(n,{className:"p-6",children:e.jsx(E,{data:s.errorDistribution,type:r})})]}),s.progressTrend.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"学习进度趋势"}),e.jsx(n,{className:"p-6",children:e.jsx($,{data:s.progressTrend})})]})]})})}export{q as default};
