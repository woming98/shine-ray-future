import{j as e,m as r,f as k,T as C,e as u,B as S}from"./index-BMvr2Q3z.js";import{u as T,E as o}from"./useStore-BLrCrgBZ.js";import{u as $}from"./useGlobalUser-DSzfZyT8.js";import{C as h,B as p,S as g,T as P}from"./Button-pqDR0Cbl.js";import{F as A,A as R,a as D,Z as O}from"./AreaChart-C9JyVnxx.js";import{S as E}from"./star-CbODIBH1.js";import{P as b}from"./play-BIQoX-S_.js";import{C as M}from"./clock-CHSnmCTT.js";import{T as v}from"./target-B7gtuoqn.js";import{R as B,C as G,X as I,Y as F,T as L}from"./generateCategoricalChart-BxVAJV1Q.js";import{C as V}from"./chevron-right-AIw1T69N.js";import"./middleware-dtXbDlhF.js";function X({progress:c,size:a=120,strokeWidth:d=8,color:x="#10b981",bgColor:l="rgba(16, 185, 129, 0.1)",children:i}){const m=(a-d)/2,t=m*2*Math.PI,j=t-c/100*t;return e.jsxs("div",{className:"relative inline-flex items-center justify-center",children:[e.jsxs("svg",{width:a,height:a,className:"-rotate-90",children:[e.jsx("circle",{cx:a/2,cy:a/2,r:m,fill:"none",stroke:l,strokeWidth:d}),e.jsx(r.circle,{cx:a/2,cy:a/2,r:m,fill:"none",stroke:x,strokeWidth:d,strokeLinecap:"round",strokeDasharray:t,initial:{strokeDashoffset:t},animate:{strokeDashoffset:j},transition:{duration:1.5,ease:"easeOut"}})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i})]})}const f="/subjects/english";function se(){const c=k(),{stats:a,dailyStudy:d,achievements:x,skillProgress:l}=T(),i=$(s=>s.user),m={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},t={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}},j=Math.round(o.reduce((s,N)=>s+(l[N.id]||0),0)/o.length),y=x.filter(s=>s.unlocked).slice(0,3),n=o.find(s=>(l[s.id]||0)>0&&(l[s.id]||0)<100)||o[0],w=d.length>0?d.slice(-7).map(s=>({date:s.date.split("-").slice(1).join("/"),minutes:s.minutes})):[{date:"1/4",minutes:0},{date:"1/5",minutes:0},{date:"1/6",minutes:0},{date:"1/7",minutes:0},{date:"1/8",minutes:0},{date:"1/9",minutes:0},{date:"1/10",minutes:0}];return e.jsxs(r.div,{variants:m,initial:"hidden",animate:"visible",className:"space-y-8",children:[e.jsx(r.section,{variants:t,className:"relative overflow-hidden",children:e.jsx(h,{className:"p-8 bg-gradient-to-br from-emerald-50 to-teal-50 border-emerald-200",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs(r.h1,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-2",children:["欢迎回来，",(i==null?void 0:i.name)||"同学","！"]}),e.jsx("p",{className:"text-gray-600 text-lg mb-4",children:"继续你的英文学习之旅，今天也要加油哦！"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-orange-500"}),e.jsxs("span",{className:"text-gray-700 font-medium",children:["连续学习 ",e.jsx("span",{className:"text-emerald-600",children:a.currentStreak})," 天"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("span",{className:"text-gray-700 font-medium",children:["等级 ",e.jsxs("span",{className:"text-purple-600",children:["Lv.",(i==null?void 0:i.level)||1]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(X,{progress:j,size:100,strokeWidth:8,color:"#10b981",bgColor:"#d1fae5",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[j,"%"]}),e.jsx("p",{className:"text-xs text-gray-600",children:"总进度"})]})}),e.jsx(p,{size:"lg",icon:e.jsx(b,{className:"w-5 h-5"}),onClick:()=>c(`${f}/${n.id}`),children:"继续学习"})]})]})})}),e.jsx(r.section,{variants:t,children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(g,{icon:e.jsx(M,{className:"w-6 h-6"}),label:"总学习时间",value:`${Math.floor(a.totalStudyTime/60)}h ${a.totalStudyTime%60}m`,change:"+45分钟",changeType:"positive"}),e.jsx(g,{icon:e.jsx(v,{className:"w-6 h-6"}),label:"完成练习",value:a.exercisesSolved,change:"+12题",changeType:"positive"}),e.jsx(g,{icon:e.jsx(C,{className:"w-6 h-6"}),label:"平均正确率",value:`${a.averageScore}%`,change:"+3%",changeType:"positive"}),e.jsx(g,{icon:e.jsx(u,{className:"w-6 h-6"}),label:"获得成就",value:x.filter(s=>s.unlocked).length,change:`/${x.length}`,changeType:"neutral"})]})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[e.jsxs(r.div,{variants:t,className:"xl:col-span-2 space-y-8",children:[e.jsxs(h,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"学习趋势"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"过去7天的学习时间"})]})}),e.jsx("div",{className:"h-64",children:e.jsx(B,{width:"100%",height:"100%",children:e.jsxs(R,{data:w,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorMinutes",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),e.jsx(G,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(I,{dataKey:"date",stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:12}}),e.jsx(F,{stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:12}}),e.jsx(L,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},labelStyle:{color:"#374151"},itemStyle:{color:"#10b981"}}),e.jsx(D,{type:"monotone",dataKey:"minutes",stroke:"#10b981",strokeWidth:2,fillOpacity:1,fill:"url(#colorMinutes)"})]})})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"核心技能"}),e.jsxs(p,{variant:"ghost",size:"sm",children:["查看全部 ",e.jsx(V,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:o.map((s,N)=>e.jsx(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:N*.1},children:e.jsx(P,{icon:s.icon,name:s.name,nameCN:s.nameCN,description:s.description,progress:l[s.id]||0,onClick:()=>c(`${f}/${s.id}`)})},s.id))})]})]}),e.jsxs(r.div,{variants:t,className:"space-y-6",children:[e.jsxs(h,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5 text-emerald-600"}),"今日任务"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50 border border-emerald-200 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-500/20 flex items-center justify-center",children:e.jsx(S,{className:"w-4 h-4 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 text-sm font-medium",children:"学习30分钟"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"进度 20/30 分钟"})]})]}),e.jsx("span",{className:"text-emerald-600 text-sm font-medium",children:"67%"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-50 border border-emerald-200 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-teal-500/20 flex items-center justify-center",children:e.jsx(v,{className:"w-4 h-4 text-teal-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 text-sm font-medium",children:"完成10道题"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"进度 7/10 题"})]})]}),e.jsx("span",{className:"text-teal-600 text-sm font-medium",children:"70%"})]})]})]}),e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5 text-yellow-500"}),"最近成就"]}),e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>c(`${f}/report`),children:"查看全部"})]}),y.length>0?e.jsx("div",{className:"space-y-3",children:y.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-emerald-50 border border-emerald-200 rounded-xl",children:[e.jsx("span",{className:"text-2xl",children:s.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 font-medium",children:s.titleCN}),e.jsx("p",{className:"text-gray-600 text-xs",children:s.description})]})]},s.id))}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-3 rounded-full bg-emerald-100 border border-emerald-200 flex items-center justify-center",children:e.jsx(u,{className:"w-8 h-8 text-emerald-400"})}),e.jsx("p",{className:"text-gray-600",children:"继续学习，解锁更多成就！"})]})]}),e.jsxs(h,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"推荐继续"}),e.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:[n.nameCN," - ",n.name]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-3xl",children:n.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-gray-700 text-sm",children:"学习进度"}),e.jsxs("span",{className:"text-emerald-600 font-medium",children:[l[n.id]||0,"%"]})]}),e.jsx("div",{className:"h-2 bg-emerald-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-teal-500 rounded-full",style:{width:`${l[n.id]||0}%`}})})]})]}),e.jsx(p,{fullWidth:!0,icon:e.jsx(b,{className:"w-4 h-4"}),onClick:()=>c(`${f}/${n.id}`),children:"立即学习"})]})]})]})]})}export{se as default};
