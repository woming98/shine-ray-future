import{c as z,r as p,j as e,m as j,A as V,F as R,B as D}from"./index-BMvr2Q3z.js";import{s as G}from"./s1-reading-BZMNVTMq.js";import{s as Z,L as Y}from"./s1-writing-q4Hg3Ok0.js";import{C as P}from"./check-circle-C5mn4RTd.js";import{X as E}from"./x-circle-DC3krgu5.js";import{A as q}from"./arrow-left-Op4CMYGn.js";import{C as W}from"./clock-CHSnmCTT.js";import{C as M}from"./chevron-left-CuOLKypr.js";import{C as O}from"./chevron-right-AIw1T69N.js";import{R as J}from"./rotate-ccw-BC9kiXBq.js";import{L as U}from"./lightbulb-Boxxg2Kv.js";import{A as X}from"./alert-triangle-7yQUNNU5.js";import{S as K}from"./send-_8Oxq5Rk.js";import{P as Q}from"./pen-tool-aHdskOzV.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=z("BookA",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"m8 13 4-7 4 7",key:"4rari8"}],["path",{d:"M9.1 11h5.7",key:"1gkovt"}]]),ee=[{id:"s1-g-001",grade:"S1",type:"choice",category:"grammar",topic:"Present Tense",difficulty:"easy",question:"She ___ to school every day.",options:["go","goes","going","went"],answer:"goes",explanation:"ä¸»è¯­æ˜¯ç¬¬ä¸‰äººç§°å•æ•° (She)ï¼Œä¸€èˆ¬ç°åœ¨æ—¶æ€åŠ¨è¯è¦åŠ  -s æˆ– -esã€‚"},{id:"s1-g-002",grade:"S1",type:"choice",category:"grammar",topic:"Articles",difficulty:"easy",question:"I saw ___ elephant at the zoo.",options:["a","an","the","-"],answer:"an",explanation:'elephant ä»¥å…ƒéŸ³éŸ³ç´ å¼€å¤´ï¼Œæ‰€ä»¥ç”¨ "an"ã€‚'},{id:"s1-g-003",grade:"S1",type:"choice",category:"grammar",topic:"Past Tense",difficulty:"easy",question:"Yesterday, I ___ my grandmother.",options:["visit","visits","visited","visiting"],answer:"visited",explanation:'"Yesterday" è¡¨ç¤ºè¿‡å»æ—¶é—´ï¼ŒåŠ¨è¯ç”¨è¿‡å»å¼ visitedã€‚'},{id:"s1-g-004",grade:"S1",type:"fill",category:"grammar",topic:"Be Verbs",difficulty:"easy",question:"They ___ (be) very happy yesterday.",answer:["were"],explanation:"ä¸»è¯­ They æ˜¯å¤æ•°ï¼Œè¿‡å»å¼ç”¨ wereã€‚"},{id:"s1-g-005",grade:"S1",type:"error-correction",category:"grammar",topic:"Subject-Verb Agreement",difficulty:"medium",question:`Find and correct the error: "He don't like vegetables."`,answer:["He doesn't like vegetables.","doesn't"],explanation:"ç¬¬ä¸‰äººç§°å•æ•°å¦å®šå¥ç”¨ doesn'tï¼Œä¸æ˜¯ don'tã€‚"},{id:"s1-v-001",grade:"S1",type:"choice",category:"vocabulary",topic:"Opposites",difficulty:"easy",question:'What is the opposite of "happy"?',options:["sad","angry","excited","tired"],answer:"sad",explanation:"happyï¼ˆé«˜å…´ï¼‰çš„åä¹‰è¯æ˜¯ sadï¼ˆæ‚²ä¼¤ï¼‰ã€‚"},{id:"s1-v-002",grade:"S1",type:"choice",category:"vocabulary",topic:"Word Meaning",difficulty:"easy",question:'Which word means "very big"?',options:["tiny","huge","small","narrow"],answer:"huge",explanation:'huge æ„æ€æ˜¯"å·¨å¤§çš„"ï¼Œä¸ "very big" æ„æ€ç›¸è¿‘ã€‚'},{id:"s1-v-003",grade:"S1",type:"choice",category:"vocabulary",topic:"Parts of Speech",difficulty:"easy",question:"Which word is a noun?",options:["quickly","beautiful","happiness","run"],answer:"happiness",explanation:"happiness æ˜¯åè¯ã€‚quickly æ˜¯å‰¯è¯ï¼Œbeautiful æ˜¯å½¢å®¹è¯ï¼Œrun æ˜¯åŠ¨è¯ã€‚"}],$=[{id:"v1-syn-001",grade:"S1",type:"synonym",question:'Choose the word that means the same as "happy":',word:"happy",options:["sad","excited","joyful","tired"],answer:"joyful",explanation:'"Joyful" means feeling or showing great happiness, which is similar to "happy".',difficulty:"easy"},{id:"v1-syn-002",grade:"S1",type:"synonym",question:'Choose the word that means the same as "big":',word:"big",options:["tiny","large","small","narrow"],answer:"large",explanation:'"Large" means of great size, which is the same meaning as "big".',difficulty:"easy"},{id:"v1-syn-003",grade:"S1",type:"synonym",question:'Choose the word that means the same as "fast":',word:"fast",options:["slow","quick","lazy","heavy"],answer:"quick",explanation:'"Quick" means moving or doing something at high speed, same as "fast".',difficulty:"easy"},{id:"v1-syn-004",grade:"S1",type:"synonym",question:'Choose the word that means the same as "beautiful":',word:"beautiful",options:["ugly","pretty","boring","plain"],answer:"pretty",explanation:'"Pretty" means attractive or beautiful in appearance.',difficulty:"easy"},{id:"v1-syn-005",grade:"S1",type:"synonym",question:'Choose the word that means the same as "smart":',word:"smart",options:["stupid","intelligent","slow","weak"],answer:"intelligent",explanation:'"Intelligent" means having or showing high mental capacity, similar to "smart".',difficulty:"easy"},{id:"v1-syn-006",grade:"S1",type:"synonym",question:'Choose the word that means the same as "angry":',word:"angry",options:["calm","furious","peaceful","quiet"],answer:"furious",explanation:'"Furious" means extremely angry.',difficulty:"medium"},{id:"v1-syn-007",grade:"S1",type:"synonym",question:'Choose the word that means the same as "start":',word:"start",options:["finish","begin","end","stop"],answer:"begin",explanation:'"Begin" means to start or commence something.',difficulty:"easy"},{id:"v1-syn-008",grade:"S1",type:"synonym",question:'Choose the word that means the same as "difficult":',word:"difficult",options:["easy","simple","hard","clear"],answer:"hard",explanation:'"Hard" can mean difficult or challenging.',difficulty:"easy"},{id:"v1-syn-009",grade:"S1",type:"synonym",question:'Choose the word that means the same as "scared":',word:"scared",options:["brave","afraid","bold","confident"],answer:"afraid",explanation:'"Afraid" means feeling fear or anxiety, same as "scared".',difficulty:"easy"},{id:"v1-syn-010",grade:"S1",type:"synonym",question:'Choose the word that means the same as "wealthy":',word:"wealthy",options:["poor","rich","cheap","expensive"],answer:"rich",explanation:'"Rich" means having a lot of money or valuable possessions, same as "wealthy".',difficulty:"medium"},{id:"v1-syn-011",grade:"S1",type:"synonym",question:'Choose the word that means the same as "tiny":',word:"tiny",options:["huge","massive","miniature","giant"],answer:"miniature",explanation:'"Miniature" means very small, similar to "tiny".',difficulty:"medium"},{id:"v1-syn-012",grade:"S1",type:"synonym",question:'Choose the word that means the same as "fix":',word:"fix",options:["break","repair","damage","destroy"],answer:"repair",explanation:'"Repair" means to fix something that is broken or damaged.',difficulty:"easy"},{id:"v1-ant-001",grade:"S1",type:"antonym",question:'Choose the word that means the OPPOSITE of "hot":',word:"hot",options:["warm","cold","wet","dry"],answer:"cold",explanation:'"Cold" is the opposite of "hot" in terms of temperature.',difficulty:"easy"},{id:"v1-ant-002",grade:"S1",type:"antonym",question:'Choose the word that means the OPPOSITE of "old":',word:"old",options:["ancient","young","aged","elderly"],answer:"young",explanation:'"Young" is the opposite of "old" in terms of age.',difficulty:"easy"},{id:"v1-ant-003",grade:"S1",type:"antonym",question:'Choose the word that means the OPPOSITE of "light":',word:"light",options:["bright","dark","sunny","clear"],answer:"dark",explanation:'"Dark" is the opposite of "light" in terms of brightness.',difficulty:"easy"},{id:"v1-ant-004",grade:"S1",type:"antonym",question:'Choose the word that means the OPPOSITE of "tall":',word:"tall",options:["high","short","long","wide"],answer:"short",explanation:'"Short" is the opposite of "tall" in terms of height.',difficulty:"easy"},{id:"v1-ant-005",grade:"S1",type:"antonym",question:'Choose the word that means the OPPOSITE of "cheap":',word:"cheap",options:["free","expensive","low","discount"],answer:"expensive",explanation:'"Expensive" means costing a lot of money, which is the opposite of "cheap".',difficulty:"easy"},{id:"v1-ant-006",grade:"S1",type:"antonym",question:'Choose the word that means the OPPOSITE of "empty":',word:"empty",options:["vacant","hollow","full","blank"],answer:"full",explanation:'"Full" means containing as much as possible, opposite of "empty".',difficulty:"easy"},{id:"v1-ant-007",grade:"S1",type:"antonym",question:'Choose the word that means the OPPOSITE of "noisy":',word:"noisy",options:["loud","quiet","sound","music"],answer:"quiet",explanation:'"Quiet" means making little or no noise, opposite of "noisy".',difficulty:"easy"},{id:"v1-ant-008",grade:"S1",type:"antonym",question:'Choose the word that means the OPPOSITE of "hard":',word:"hard",options:["tough","soft","strong","firm"],answer:"soft",explanation:'"Soft" means not hard or firm to touch, opposite of "hard".',difficulty:"easy"},{id:"v1-ant-009",grade:"S1",type:"antonym",question:'Choose the word that means the OPPOSITE of "clean":',word:"clean",options:["pure","dirty","tidy","neat"],answer:"dirty",explanation:'"Dirty" means covered with dirt or impurities, opposite of "clean".',difficulty:"easy"},{id:"v1-ant-010",grade:"S1",type:"antonym",question:'Choose the word that means the OPPOSITE of "early":',word:"early",options:["soon","late","quick","fast"],answer:"late",explanation:'"Late" means after the expected time, opposite of "early".',difficulty:"easy"},{id:"v1-ant-011",grade:"S1",type:"antonym",question:'Choose the word that means the OPPOSITE of "win":',word:"win",options:["gain","lose","earn","achieve"],answer:"lose",explanation:'"Lose" means to fail to win, opposite of "win".',difficulty:"easy"},{id:"v1-ant-012",grade:"S1",type:"antonym",question:'Choose the word that means the OPPOSITE of "remember":',word:"remember",options:["recall","forget","remind","memorize"],answer:"forget",explanation:'"Forget" means to fail to remember, opposite of "remember".',difficulty:"easy"},{id:"v1-ant-013",grade:"S1",type:"antonym",question:'Choose the word that means the OPPOSITE of "polite":',word:"polite",options:["kind","rude","nice","gentle"],answer:"rude",explanation:'"Rude" means showing bad manners, opposite of "polite".',difficulty:"medium"},{id:"v1-mean-001",grade:"S1",type:"meaning",question:'What does "enormous" mean?',word:"enormous",options:["very small","very large","very fast","very slow"],answer:"very large",explanation:'"Enormous" means extremely large in size or amount.',difficulty:"medium"},{id:"v1-mean-002",grade:"S1",type:"meaning",question:'What does "delicious" mean?',word:"delicious",options:["tastes bad","tastes very good","looks ugly","smells bad"],answer:"tastes very good",explanation:'"Delicious" means having a very pleasant taste.',difficulty:"easy"},{id:"v1-mean-003",grade:"S1",type:"meaning",question:'What does "ancient" mean?',word:"ancient",options:["very new","very old","very young","very modern"],answer:"very old",explanation:'"Ancient" means belonging to a period of time long ago.',difficulty:"medium"},{id:"v1-mean-004",grade:"S1",type:"meaning",question:'What does "exhausted" mean?',word:"exhausted",options:["very happy","very tired","very excited","very angry"],answer:"very tired",explanation:'"Exhausted" means completely tired or worn out.',difficulty:"medium"},{id:"v1-mean-005",grade:"S1",type:"meaning",question:'What does "curious" mean?',word:"curious",options:["wanting to know more","feeling sleepy","being lazy","feeling sad"],answer:"wanting to know more",explanation:'"Curious" means eager to learn or know something.',difficulty:"medium"},{id:"v1-mean-006",grade:"S1",type:"meaning",question:'What does "generous" mean?',word:"generous",options:["selfish","willing to give","mean","greedy"],answer:"willing to give",explanation:'"Generous" means willing to give money, help, or time freely.',difficulty:"medium"},{id:"v1-mean-007",grade:"S1",type:"meaning",question:'What does "brilliant" mean?',word:"brilliant",options:["very dull","very stupid","very bright or clever","very dark"],answer:"very bright or clever",explanation:'"Brilliant" means very bright, intelligent, or impressive.',difficulty:"medium"},{id:"v1-mean-008",grade:"S1",type:"meaning",question:'What does "fragile" mean?',word:"fragile",options:["strong","easily broken","heavy","solid"],answer:"easily broken",explanation:'"Fragile" means easily broken or damaged.',difficulty:"medium"},{id:"v1-mean-009",grade:"S1",type:"meaning",question:'What does "purchase" mean?',word:"purchase",options:["to sell","to buy","to throw","to find"],answer:"to buy",explanation:'"Purchase" means to buy something.',difficulty:"medium"},{id:"v1-mean-010",grade:"S1",type:"meaning",question:'What does "vanish" mean?',word:"vanish",options:["to appear","to disappear","to grow","to stay"],answer:"to disappear",explanation:'"Vanish" means to disappear suddenly.',difficulty:"medium"},{id:"v1-mean-011",grade:"S1",type:"meaning",question:'What does "confident" mean?',word:"confident",options:["sure of oneself","feeling scared","being shy","feeling worried"],answer:"sure of oneself",explanation:'"Confident" means feeling sure about yourself and your abilities.',difficulty:"medium"},{id:"v1-mean-012",grade:"S1",type:"meaning",question:'What does "ordinary" mean?',word:"ordinary",options:["special","normal","unique","rare"],answer:"normal",explanation:'"Ordinary" means with no special or distinctive features; normal.',difficulty:"easy"},{id:"v1-ctx-001",grade:"S1",type:"context",question:"The weather is very ____ today. It's raining heavily.",word:"stormy",options:["sunny","stormy","dry","clear"],answer:"stormy",explanation:'When it rains heavily, the weather is "stormy".',difficulty:"medium"},{id:"v1-ctx-002",grade:"S1",type:"context",question:"She was very ____ after running for 30 minutes without stopping.",word:"tired",options:["energetic","tired","fresh","awake"],answer:"tired",explanation:'Running for a long time makes people feel "tired".',difficulty:"easy"},{id:"v1-ctx-003",grade:"S1",type:"context",question:"The elephant is a very ____ animal. It can weigh up to 6,000 kg.",word:"heavy",options:["light","heavy","small","thin"],answer:"heavy",explanation:'With a weight of up to 6,000 kg, elephants are very "heavy".',difficulty:"easy"},{id:"v1-ctx-004",grade:"S1",type:"context",question:"Please be ____ in the library. Other people are studying.",word:"quiet",options:["loud","noisy","quiet","active"],answer:"quiet",explanation:'In libraries, people should be "quiet" so others can study.',difficulty:"easy"},{id:"v1-ctx-005",grade:"S1",type:"context",question:"The test was very ____. Nobody in the class got a perfect score.",word:"difficult",options:["easy","simple","difficult","boring"],answer:"difficult",explanation:'If nobody got a perfect score, the test must have been "difficult".',difficulty:"easy"},{id:"v1-ctx-006",grade:"S1",type:"context",question:"Tom felt ____ when he won first place in the competition.",word:"proud",options:["sad","proud","angry","scared"],answer:"proud",explanation:'Winning first place typically makes someone feel "proud".',difficulty:"easy"},{id:"v1-ctx-007",grade:"S1",type:"context",question:"The mountain is very ____. It takes two days to climb to the top.",word:"high",options:["low","short","high","flat"],answer:"high",explanation:'A mountain that takes two days to climb must be very "high".',difficulty:"easy"},{id:"v1-ctx-008",grade:"S1",type:"context",question:"Mary is very ____. She always helps others without asking for anything in return.",word:"kind",options:["mean","selfish","kind","rude"],answer:"kind",explanation:'Someone who always helps others is "kind".',difficulty:"easy"},{id:"v1-ctx-009",grade:"S1",type:"context",question:"The movie was so ____ that everyone in the cinema was laughing.",word:"funny",options:["boring","sad","scary","funny"],answer:"funny",explanation:'A movie that makes everyone laugh is "funny".',difficulty:"easy"},{id:"v1-ctx-010",grade:"S1",type:"context",question:"He felt ____ because he forgot to bring his homework to school.",word:"worried",options:["happy","worried","excited","relaxed"],answer:"worried",explanation:'Forgetting homework usually makes students feel "worried".',difficulty:"easy"},{id:"v1-ctx-011",grade:"S1",type:"context",question:"The room was completely ____ because all the lights were turned off.",word:"dark",options:["bright","dark","colorful","warm"],answer:"dark",explanation:'Without lights, a room becomes "dark".',difficulty:"easy"},{id:"v1-ctx-012",grade:"S1",type:"context",question:"She was ____ to see her grandmother after many years.",word:"excited",options:["bored","sad","excited","angry"],answer:"excited",explanation:'Meeting loved ones after a long time typically makes people feel "excited".',difficulty:"easy"},{id:"v1-ctx-013",grade:"S1",type:"context",question:"The soup is too ____. I need to add some water.",word:"salty",options:["sweet","salty","sour","fresh"],answer:"salty",explanation:'Adding water to soup usually means it is too "salty".',difficulty:"medium"},{id:"v1-ctx-014",grade:"S1",type:"context",question:"The old man walked very ____ because his legs hurt.",word:"slowly",options:["quickly","slowly","happily","loudly"],answer:"slowly",explanation:'Pain in the legs would make someone walk "slowly".',difficulty:"easy"},{id:"v1-ctx-015",grade:"S1",type:"context",question:"This cake is ____! The baker must be very talented.",word:"delicious",options:["terrible","delicious","awful","bland"],answer:"delicious",explanation:'A talented baker would make a cake that is "delicious".',difficulty:"easy"}];function te(i){switch(i){case"S1":return{grade:"S1",gradeLabel:"ä¸­ä¸€",reading:{timeLimit:20,passages:G},grammar:{timeLimit:15,questions:ee},vocabulary:{timeLimit:15,questions:$},writing:{timeLimit:30,tasks:Z}};case"S2":return{grade:"S2",gradeLabel:"ä¸­äºŒ",reading:{timeLimit:25,passages:[]},grammar:{timeLimit:20,questions:[]},vocabulary:{timeLimit:15,questions:$},writing:{timeLimit:35,tasks:[]}};case"S3":return{grade:"S3",gradeLabel:"ä¸­ä¸‰",reading:{timeLimit:30,passages:[]},grammar:{timeLimit:25,questions:[]},vocabulary:{timeLimit:15,questions:$},writing:{timeLimit:40,tasks:[]}};default:throw new Error(`Unknown grade: ${i}`)}}const se=[{value:"S1",label:"ä¸­ä¸€ (S1)"},{value:"S2",label:"ä¸­äºŒ (S2)"},{value:"S3",label:"ä¸­ä¸‰ (S3)"}],B=[{value:"reading",label:"Reading",labelZh:"é˜…è¯»ç†è§£",icon:"BookOpen"},{value:"grammar",label:"Grammar & Vocabulary",labelZh:"è¯­æ³•ä¸è¯æ±‡",icon:"FileText"},{value:"vocabulary",label:"Vocabulary Test",labelZh:"è¯æ±‡é‡æµ‹è¯•",icon:"BookA"},{value:"writing",label:"Writing",labelZh:"å†™ä½œ",icon:"PenTool"}];function ae({passages:i,timeLimit:S,onBack:h}){var _;const[y,a]=p.useState("testing"),[m,f]=p.useState(0),[l,w]=p.useState(0),[o,N]=p.useState({}),[t,k]=p.useState(S*60),b=i[m],u=b==null?void 0:b.questions[l],x=i.flatMap(s=>s.questions);p.useEffect(()=>{if(y!=="testing"||t<=0)return;const s=setInterval(()=>{k(r=>r<=1?(a("result"),0):r-1)},1e3);return()=>clearInterval(s)},[y,t]);const g=s=>{const r=Math.floor(s/60),n=s%60;return`${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},T=(s,r)=>{N(n=>({...n,[s]:r}))},A=()=>{l<b.questions.length-1?w(s=>s+1):m<i.length-1&&(f(s=>s+1),w(0))},c=()=>{l>0?w(s=>s-1):m>0&&(f(s=>s-1),w(i[m-1].questions.length-1))},d=()=>a("result"),C=()=>{let s=0;return x.forEach(r=>{var L;const n=(L=o[r.id])==null?void 0:L.toLowerCase();(Array.isArray(r.answer)?r.answer.map(I=>I.toLowerCase()):[r.answer.toLowerCase()]).includes(n)&&s++}),{correct:s,total:x.length,percentage:Math.round(s/x.length*100)}};if(y==="result"){const s=C();return e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"text-6xl font-bold text-primary-600 mb-2",children:[s.percentage,"%"]}),e.jsxs("div",{className:"text-slate-600",children:["ç­”å¯¹ ",s.correct," / ",s.total," é¢˜"]})]}),e.jsx("div",{className:"space-y-4 mb-8",children:i.map(r=>e.jsxs("div",{className:"border border-slate-200 rounded-xl p-4",children:[e.jsx("h3",{className:"font-semibold text-slate-800 mb-3",children:r.title}),r.questions.map(n=>{const v=o[n.id],L=Array.isArray(n.answer)?n.answer[0]:n.answer,I=Array.isArray(n.answer)?n.answer.map(H=>H.toLowerCase()).includes(v==null?void 0:v.toLowerCase()):(v==null?void 0:v.toLowerCase())===n.answer.toLowerCase();return e.jsx("div",{className:"py-3 border-t border-slate-100",children:e.jsxs("div",{className:"flex items-start gap-2",children:[I?e.jsx(P,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}):e.jsx(E,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"text-slate-700 text-sm",children:n.question}),e.jsxs("p",{className:"text-xs mt-1",children:[e.jsx("span",{className:"text-slate-500",children:"ä½ çš„ç­”æ¡ˆï¼š"}),e.jsx("span",{className:I?"text-green-600":"text-red-600",children:v||"æœªä½œç­”"}),!I&&e.jsxs("span",{className:"text-green-600 ml-2",children:["æ­£ç¡®ç­”æ¡ˆï¼š",L]})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:n.explanation})]})]})},n.id)})]},r.id))}),e.jsx("button",{onClick:h,className:"w-full py-3 bg-primary-600 text-white font-medium rounded-xl hover:bg-primary-700 transition-colors",children:"è¿”å›é€‰æ‹©"})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:h,className:"flex items-center gap-2 text-slate-600 hover:text-primary-600",children:[e.jsx(q,{className:"w-4 h-4"}),"è¿”å›"]}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-full shadow-sm",children:[e.jsx(W,{className:"w-4 h-4 text-primary-600"}),e.jsx("span",{className:"font-mono font-medium text-slate-700",children:g(t)})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-4",children:b.title}),e.jsx("div",{className:"prose prose-slate prose-sm max-w-none bg-slate-50 rounded-xl p-4 max-h-64 overflow-y-auto",children:e.jsx("p",{className:"whitespace-pre-line",children:b.passage})})]}),e.jsxs(j.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[e.jsxs("div",{className:"text-sm text-slate-500 mb-2",children:["é—®é¢˜ ",l+1," / ",b.questions.length]}),e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:u==null?void 0:u.question}),(u==null?void 0:u.type)==="fill"?e.jsx("input",{type:"text",value:o[u.id]||"",onChange:s=>T(u.id,s.target.value),placeholder:"è¾“å…¥ç­”æ¡ˆ...",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-200 focus:border-primary-500"}):e.jsx("div",{className:"space-y-3",children:(_=u==null?void 0:u.options)==null?void 0:_.map((s,r)=>e.jsx("button",{onClick:()=>T(u.id,s),className:`w-full p-4 text-left rounded-xl border-2 transition-all ${o[u.id]===s?"border-primary-500 bg-primary-50":"border-slate-200 hover:border-primary-300"}`,children:s},r))})]},u==null?void 0:u.id),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:c,disabled:m===0&&l===0,className:"flex items-center gap-2 px-4 py-2 text-slate-600 hover:text-primary-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(M,{className:"w-4 h-4"}),"ä¸Šä¸€é¢˜"]}),m===i.length-1&&l===b.questions.length-1?e.jsx("button",{onClick:d,className:"px-6 py-2 bg-primary-600 text-white font-medium rounded-xl hover:bg-primary-700 transition-colors",children:"æäº¤ç­”æ¡ˆ"}):e.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 text-primary-600 hover:text-primary-700",children:["ä¸‹ä¸€é¢˜",e.jsx(O,{className:"w-4 h-4"})]})]})]})}function re({questions:i,timeLimit:S,onBack:h}){var A;const[y,a]=p.useState("testing"),[m,f]=p.useState(0),[l,w]=p.useState({}),[o,N]=p.useState(S*60),t=i[m];p.useEffect(()=>{if(y!=="testing"||o<=0)return;const c=setInterval(()=>{N(d=>d<=1?(a("result"),0):d-1)},1e3);return()=>clearInterval(c)},[y,o]);const k=c=>{const d=Math.floor(c/60),C=c%60;return`${d.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`},b=(c,d)=>{w(C=>({...C,[c]:d}))},u=()=>{m<i.length-1&&f(c=>c+1)},x=()=>{m>0&&f(c=>c-1)},g=()=>a("result"),T=()=>{let c=0;return i.forEach(d=>{var s;const C=(s=l[d.id])==null?void 0:s.toLowerCase().trim();(Array.isArray(d.answer)?d.answer.map(r=>r.toLowerCase()):[d.answer.toLowerCase()]).includes(C)&&c++}),{correct:c,total:i.length,percentage:Math.round(c/i.length*100)}};if(y==="result"){const c=T();return e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"text-6xl font-bold text-primary-600 mb-2",children:[c.percentage,"%"]}),e.jsxs("div",{className:"text-slate-600",children:["ç­”å¯¹ ",c.correct," / ",c.total," é¢˜"]})]}),e.jsx("div",{className:"space-y-4 mb-8 max-h-96 overflow-y-auto",children:i.map((d,C)=>{const _=l[d.id],s=Array.isArray(d.answer)?d.answer[0]:d.answer,n=(Array.isArray(d.answer)?d.answer.map(v=>v.toLowerCase()):[d.answer.toLowerCase()]).includes(_==null?void 0:_.toLowerCase().trim());return e.jsx("div",{className:"border border-slate-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[n?e.jsx(P,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}):e.jsx(E,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs px-2 py-0.5 bg-slate-100 rounded text-slate-600",children:d.topic}),e.jsxs("span",{className:"text-xs text-slate-400",children:["#",C+1]})]}),e.jsx("p",{className:"text-slate-700 text-sm",children:d.question}),e.jsxs("p",{className:"text-xs mt-2",children:[e.jsx("span",{className:"text-slate-500",children:"ä½ çš„ç­”æ¡ˆï¼š"}),e.jsx("span",{className:n?"text-green-600":"text-red-600",children:_||"æœªä½œç­”"}),!n&&e.jsxs("span",{className:"text-green-600 ml-2",children:["æ­£ç¡®ç­”æ¡ˆï¼š",s]})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1 bg-slate-50 rounded p-2",children:d.explanation})]})]})},d.id)})}),e.jsx("button",{onClick:h,className:"w-full py-3 bg-primary-600 text-white font-medium rounded-xl hover:bg-primary-700 transition-colors",children:"è¿”å›é€‰æ‹©"})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:h,className:"flex items-center gap-2 text-slate-600 hover:text-primary-600",children:[e.jsx(q,{className:"w-4 h-4"}),"è¿”å›"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-slate-500",children:[m+1," / ",i.length]}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white rounded-full shadow-sm",children:[e.jsx(W,{className:"w-4 h-4 text-primary-600"}),e.jsx("span",{className:"font-mono font-medium text-slate-700",children:k(o)})]})]})]}),e.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-500 transition-all duration-300",style:{width:`${(m+1)/i.length*100}%`}})}),e.jsxs(j.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${(t==null?void 0:t.category)==="grammar"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:(t==null?void 0:t.category)==="grammar"?"Grammar":"Vocabulary"}),e.jsx("span",{className:"text-xs px-2 py-1 bg-slate-100 text-slate-600 rounded",children:t==null?void 0:t.topic})]}),e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-6",children:t==null?void 0:t.question}),(t==null?void 0:t.type)==="fill"||(t==null?void 0:t.type)==="error-correction"?e.jsx("input",{type:"text",value:l[t.id]||"",onChange:c=>b(t.id,c.target.value),placeholder:t.type==="error-correction"?"è¾“å…¥æ­£ç¡®çš„å¥å­æˆ–æ”¹æ­£éƒ¨åˆ†...":"è¾“å…¥ç­”æ¡ˆ...",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-200 focus:border-primary-500"}):e.jsx("div",{className:"space-y-3",children:(A=t==null?void 0:t.options)==null?void 0:A.map((c,d)=>e.jsxs("button",{onClick:()=>b(t.id,c),className:`w-full p-4 text-left rounded-xl border-2 transition-all ${l[t.id]===c?"border-primary-500 bg-primary-50":"border-slate-200 hover:border-primary-300"}`,children:[e.jsxs("span",{className:"font-medium text-slate-500 mr-3",children:[String.fromCharCode(65+d),"."]}),c]},d))})]},t==null?void 0:t.id),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:x,disabled:m===0,className:"flex items-center gap-2 px-4 py-2 text-slate-600 hover:text-primary-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(M,{className:"w-4 h-4"}),"ä¸Šä¸€é¢˜"]}),m===i.length-1?e.jsx("button",{onClick:g,className:"px-6 py-2 bg-primary-600 text-white font-medium rounded-xl hover:bg-primary-700 transition-colors",children:"æäº¤ç­”æ¡ˆ"}):e.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 text-primary-600 hover:text-primary-700",children:["ä¸‹ä¸€é¢˜",e.jsx(O,{className:"w-4 h-4"})]})]})]})}function ie({questions:i,timeLimit:S,onBack:h}){var _;const[y,a]=p.useState("testing"),[m,f]=p.useState(0),[l,w]=p.useState({}),[o,N]=p.useState(S*60),t=i[m];p.useEffect(()=>{if(y!=="testing"||o<=0)return;const s=setInterval(()=>{N(r=>r<=1?(a("result"),0):r-1)},1e3);return()=>clearInterval(s)},[y,o]);const k=p.useCallback(s=>{const r=Math.floor(s/60),n=s%60;return`${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},[]),b=(s,r)=>{w(n=>({...n,[s]:r}))},u=()=>{m<i.length-1&&f(s=>s+1)},x=()=>{m>0&&f(s=>s-1)},g=()=>a("result"),T=()=>{a("testing"),f(0),w({}),N(S*60)},A=()=>{let s=0,r={synonym:{correct:0,total:0},antonym:{correct:0,total:0},meaning:{correct:0,total:0},context:{correct:0,total:0}};return i.forEach(n=>{r[n.type].total++,l[n.id]===n.answer&&(s++,r[n.type].correct++)}),{correct:s,total:i.length,percentage:Math.round(s/i.length*100),byType:r}},c=s=>{switch(s){case"synonym":return"åŒä¹‰è¯";case"antonym":return"åä¹‰è¯";case"meaning":return"å•è¯å«ä¹‰";case"context":return"ä¸Šä¸‹æ–‡";default:return s}},d=s=>{switch(s){case"synonym":return"bg-emerald-100 text-emerald-700";case"antonym":return"bg-rose-100 text-rose-700";case"meaning":return"bg-blue-100 text-blue-700";case"context":return"bg-violet-100 text-violet-700";default:return"bg-slate-100 text-slate-700"}},C=s=>{switch(s){case"easy":return"ç®€å•";case"medium":return"ä¸­ç­‰";case"hard":return"å›°éš¾";default:return s}};if(y==="result"){const s=A();return e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-primary-100 mb-4",children:e.jsx(F,{className:"w-12 h-12 text-primary-600"})}),e.jsxs("div",{className:"text-6xl font-bold text-primary-600 mb-2",children:[s.percentage,"%"]}),e.jsxs("div",{className:"text-slate-600 text-lg",children:["ç­”å¯¹ ",e.jsx("span",{className:"font-semibold text-primary-600",children:s.correct})," / ",s.total," é¢˜"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:Object.entries(s.byType).map(([r,n])=>n.total>0&&e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 text-center",children:[e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium mb-2 ${d(r)}`,children:c(r)}),e.jsxs("div",{className:"text-2xl font-bold text-slate-800",children:[n.correct,"/",n.total]}),e.jsxs("div",{className:"text-xs text-slate-500",children:[Math.round(n.correct/n.total*100),"%"]})]},r))}),e.jsxs("div",{className:"space-y-4 mb-8 max-h-96 overflow-y-auto",children:[e.jsx("h3",{className:"font-semibold text-slate-800 sticky top-0 bg-white py-2",children:"ç­”é¢˜è¯¦æƒ…"}),i.map((r,n)=>{const v=l[r.id],L=v===r.answer;return e.jsx("div",{className:`border rounded-xl p-4 ${L?"border-green-200 bg-green-50/50":"border-red-200 bg-red-50/50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[L?e.jsx(P,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}):e.jsx(E,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded font-medium ${d(r.type)}`,children:c(r.type)}),e.jsxs("span",{className:"text-xs text-slate-400",children:["#",n+1]})]}),e.jsx("p",{className:"text-slate-700 text-sm mb-2",children:r.question}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-slate-500",children:"ä½ çš„ç­”æ¡ˆï¼š"}),e.jsx("span",{className:L?"text-green-600 font-medium":"text-red-600 font-medium",children:v||"æœªä½œç­”"})]}),!L&&e.jsxs("p",{children:[e.jsx("span",{className:"text-slate-500",children:"æ­£ç¡®ç­”æ¡ˆï¼š"}),e.jsx("span",{className:"text-green-600 font-medium",children:r.answer})]})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-2 bg-white/70 rounded p-2 border border-slate-100",children:["ğŸ’¡ ",r.explanation]})]})]})},r.id)})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:T,className:"flex-1 py-3 bg-slate-100 text-slate-700 font-medium rounded-xl hover:bg-slate-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"é‡æ–°æµ‹è¯•"]}),e.jsx("button",{onClick:h,className:"flex-1 py-3 bg-primary-600 text-white font-medium rounded-xl hover:bg-primary-700 transition-colors",children:"è¿”å›é€‰æ‹©"})]})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:h,className:"flex items-center gap-2 text-slate-600 hover:text-primary-600 transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),"è¿”å›"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-slate-500",children:[e.jsx("span",{className:"font-medium text-primary-600",children:m+1})," / ",i.length]}),e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-full shadow-sm ${o<60?"bg-red-50 text-red-600":"bg-white"}`,children:[e.jsx(W,{className:`w-4 h-4 ${o<60?"text-red-500":"text-primary-600"}`}),e.jsx("span",{className:"font-mono font-medium",children:k(o)})]})]})]}),e.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx(j.div,{className:"h-full bg-gradient-to-r from-primary-500 to-primary-600",initial:{width:0},animate:{width:`${(m+1)/i.length*100}%`},transition:{duration:.3}})}),e.jsxs(j.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${d((t==null?void 0:t.type)||"")}`,children:c((t==null?void 0:t.type)||"")}),e.jsx("span",{className:"text-xs px-3 py-1 bg-slate-100 text-slate-600 rounded-full",children:C((t==null?void 0:t.difficulty)||"")}),e.jsxs("span",{className:"text-xs text-slate-400 ml-auto",children:["ç›®æ ‡å•è¯: ",e.jsx("span",{className:"font-medium text-slate-700",children:t==null?void 0:t.word})]})]}),e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-6 leading-relaxed",children:t==null?void 0:t.question}),e.jsx("div",{className:"space-y-3",children:(_=t==null?void 0:t.options)==null?void 0:_.map((s,r)=>{const n=l[t.id]===s;return e.jsxs(j.button,{onClick:()=>b(t.id,s),whileHover:{scale:1.01},whileTap:{scale:.99},className:`w-full p-4 text-left rounded-xl border-2 transition-all duration-200 ${n?"border-primary-500 bg-primary-50 shadow-sm":"border-slate-200 hover:border-primary-300 hover:bg-slate-50"}`,children:[e.jsx("span",{className:`inline-flex items-center justify-center w-7 h-7 rounded-full mr-3 text-sm font-medium ${n?"bg-primary-500 text-white":"bg-slate-100 text-slate-600"}`,children:String.fromCharCode(65+r)}),e.jsx("span",{className:n?"text-primary-700 font-medium":"text-slate-700",children:s})]},r)})})]},t==null?void 0:t.id),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:x,disabled:m===0,className:"flex items-center gap-2 px-4 py-2 text-slate-600 hover:text-primary-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(M,{className:"w-4 h-4"}),"ä¸Šä¸€é¢˜"]}),e.jsx("div",{className:"hidden md:flex items-center gap-1",children:i.map((s,r)=>e.jsx("button",{onClick:()=>f(r),className:`w-8 h-8 rounded-full text-xs font-medium transition-all ${r===m?"bg-primary-500 text-white":l[s.id]?"bg-primary-100 text-primary-700":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:r+1},s.id))}),m===i.length-1?e.jsx("button",{onClick:g,className:"px-6 py-2 bg-primary-600 text-white font-medium rounded-xl hover:bg-primary-700 transition-colors shadow-sm",children:"æäº¤ç­”æ¡ˆ"}):e.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 text-primary-600 hover:text-primary-700 transition-colors",children:["ä¸‹ä¸€é¢˜",e.jsx(O,{className:"w-4 h-4"})]})]})]})}const ne="http://localhost:3001";function oe({tasks:i,grade:S,onBack:h}){const[y,a]=p.useState("writing"),[m,f]=p.useState(""),[l,w]=p.useState(null),[o,N]=p.useState(null),t=i[0],k=m.trim().split(/\s+/).filter(x=>x.length>0).length,b=async()=>{if(k<20){N("ä½œæ–‡å¤ªçŸ­ï¼Œè¯·è‡³å°‘å†™ 20 ä¸ªå•è¯");return}a("evaluating"),N(null);try{const x=await fetch(`${ne}/api/evaluate-writing`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:t.prompt,essay:m,wordLimit:t.wordLimit,grade:S})});if(!x.ok)throw new Error("è¯„åˆ†æœåŠ¡æš‚æ—¶ä¸å¯ç”¨");const g=await x.json();w(g),a("result")}catch(x){const g=x instanceof Error?x.message:"è¯„åˆ†å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•";N(g),a("writing")}},u=()=>{f(""),w(null),a("writing")};return y==="result"&&l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("button",{onClick:h,className:"flex items-center gap-2 text-slate-600 hover:text-primary-600",children:[e.jsx(q,{className:"w-4 h-4"}),"è¿”å›é€‰æ‹©"]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6 text-center",children:"AI è¯„åˆ†ç»“æœ"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.content}),e.jsx("div",{className:"text-xs text-blue-600",children:"Content"}),e.jsx("div",{className:"text-xs text-slate-500",children:"å†…å®¹"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:l.language}),e.jsx("div",{className:"text-xs text-purple-600",children:"Language"}),e.jsx("div",{className:"text-xs text-slate-500",children:"è¯­è¨€"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.organization}),e.jsx("div",{className:"text-xs text-green-600",children:"Organization"}),e.jsx("div",{className:"text-xs text-slate-500",children:"ç»“æ„"})]}),e.jsxs("div",{className:"text-center p-4 bg-primary-50 rounded-xl",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-600",children:[l.total,"/21"]}),e.jsx("div",{className:"text-xs text-primary-600",children:"Total"}),e.jsx("div",{className:"text-xs text-slate-500",children:"æ€»åˆ†"})]})]}),e.jsxs("div",{className:"text-sm text-slate-500 text-center mb-4",children:["å­—æ•°ï¼š",l.wordCount," è¯ï¼ˆè¦æ±‚ ",t.wordLimit.min,"-",t.wordLimit.max," è¯ï¼‰"]}),l.overallComment&&e.jsx("div",{className:"bg-slate-50 rounded-xl p-4 mb-6",children:e.jsx("p",{className:"text-slate-700",children:l.overallComment})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[e.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-green-500"}),"ä¼˜ç‚¹ Strengths"]}),e.jsx("ul",{className:"space-y-2 mb-6",children:l.feedback.strengths.map((x,g)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-600",children:[e.jsx("span",{className:"text-green-500",children:"âœ“"}),x]},g))}),e.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-amber-500"}),"æ”¹è¿›å»ºè®® Improvements"]}),e.jsx("ul",{className:"space-y-2 mb-6",children:l.feedback.improvements.map((x,g)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-600",children:[e.jsx("span",{className:"text-amber-500",children:"â†’"}),x]},g))}),l.feedback.correctedSentences&&l.feedback.correctedSentences.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-red-500"}),"è¯­æ³•çº é”™ Corrections"]}),e.jsx("div",{className:"space-y-3",children:l.feedback.correctedSentences.map((x,g)=>e.jsxs("div",{className:"text-sm bg-slate-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-red-600 line-through",children:x.original}),e.jsxs("p",{className:"text-green-600 mt-1",children:["â†’ ",x.corrected]})]},g))})]})]}),t.sampleAnswer&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[e.jsx("h3",{className:"font-semibold text-slate-800 mb-4",children:"å‚è€ƒèŒƒæ–‡ Sample Answer"}),e.jsx("div",{className:"bg-slate-50 rounded-xl p-4 text-sm text-slate-700 whitespace-pre-line",children:t.sampleAnswer})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:u,className:"flex-1 py-3 border-2 border-primary-200 text-primary-600 font-medium rounded-xl hover:bg-primary-50 transition-colors",children:"é‡æ–°å†™ä½œ"}),e.jsx("button",{onClick:h,className:"flex-1 py-3 bg-primary-600 text-white font-medium rounded-xl hover:bg-primary-700 transition-colors",children:"è¿”å›é€‰æ‹©"})]})]}):y==="evaluating"?e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-12 text-center",children:[e.jsx(Y,{className:"w-12 h-12 text-primary-600 animate-spin mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-2",children:"AI æ­£åœ¨è¯„åˆ†..."}),e.jsx("p",{className:"text-slate-500",children:"è¯·ç¨å€™ï¼Œæ­£åœ¨æŒ‰ç…§é¦™æ¸¯ DSE æ ‡å‡†è¯„ä¼°ä½ çš„ä½œæ–‡"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("button",{onClick:h,className:"flex items-center gap-2 text-slate-600 hover:text-primary-600",children:[e.jsx(q,{className:"w-4 h-4"}),"è¿”å›"]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-primary-100 text-primary-700 rounded",children:t.type.toUpperCase()}),e.jsxs("span",{className:"text-xs text-slate-500",children:[t.wordLimit.min,"-",t.wordLimit.max," è¯"]})]}),e.jsx("h2",{className:"text-lg font-semibold text-slate-800 mb-3",children:t.title}),e.jsx("div",{className:"bg-slate-50 rounded-xl p-4 text-slate-700 whitespace-pre-line text-sm",children:t.prompt}),t.tips.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100",children:[e.jsx("p",{className:"text-sm font-medium text-slate-600 mb-2",children:"å†™ä½œæç¤ºï¼š"}),e.jsx("ul",{className:"text-sm text-slate-500 space-y-1",children:t.tips.map((x,g)=>e.jsxs("li",{children:["â€¢ ",x]},g))})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-slate-700",children:"ä½ çš„ä½œæ–‡"}),e.jsxs("div",{className:`text-sm ${k<t.wordLimit.min?"text-amber-600":k>t.wordLimit.max?"text-red-600":"text-green-600"}`,children:[k," / ",t.wordLimit.min,"-",t.wordLimit.max," è¯"]})]}),e.jsx("textarea",{value:m,onChange:x=>f(x.target.value),placeholder:"Start writing here...",className:"w-full h-64 p-4 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-200 focus:border-primary-500 resize-none"}),o&&e.jsx("div",{className:"mt-3 text-sm text-red-600 bg-red-50 rounded-lg p-3",children:o})]}),e.jsxs(j.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:b,disabled:k<20,className:"w-full py-4 bg-primary-600 text-white font-medium rounded-xl hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(K,{className:"w-5 h-5"}),"æäº¤å¹¶è·å– AI è¯„åˆ†"]})]})}function je(){var w;const[i,S]=p.useState(null),[h,y]=p.useState(null),a=i?te(i):null,m=o=>{switch(o){case"BookOpen":return D;case"FileText":return R;case"PenTool":return Q;case"BookA":return F;default:return R}},f=()=>{h?y(null):i&&S(null)},l=o=>{if(!a)return!1;switch(o){case"reading":return a.reading.passages.length>0;case"grammar":return a.grammar.questions.length>0;case"vocabulary":return a.vocabulary.questions.length>0;case"writing":return a.writing.tasks.length>0;default:return!1}};return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx("section",{className:"bg-gradient-to-br from-navy-950 via-primary-900 to-navy-900 pt-28 pb-16",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-4",children:"è‹±æ–‡èƒ½åŠ›æµ‹è¯•"}),e.jsxs("p",{className:"text-lg text-primary-200 max-w-2xl mx-auto",children:[!i&&"é€‰æ‹©å¹´çº§å¼€å§‹æµ‹è¯•",i&&!h&&`${a==null?void 0:a.gradeLabel} - é€‰æ‹©æµ‹è¯•æ¿å—`,i&&h&&`${a==null?void 0:a.gradeLabel} - ${(w=B.find(o=>o.value===h))==null?void 0:w.labelZh}`]})]})})}),e.jsx("section",{className:"py-8 md:py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(i||h)&&!h&&e.jsxs(j.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:f,className:"mb-6 flex items-center gap-2 text-slate-600 hover:text-primary-600 transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),"è¿”å›"]}),e.jsxs(V,{mode:"wait",children:[!i&&e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6 text-center",children:"é€‰æ‹©å¹´çº§"}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:se.map(o=>e.jsxs(j.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>S(o.value),className:"bg-white rounded-2xl p-8 shadow-sm border border-slate-100 hover:border-primary-300 hover:shadow-md transition-all group",children:[e.jsx("div",{className:"text-4xl font-bold text-primary-600 mb-2",children:o.value}),e.jsx("div",{className:"text-lg font-medium text-slate-700",children:o.label}),e.jsx(O,{className:"w-5 h-5 text-slate-400 group-hover:text-primary-500 mx-auto mt-4 transition-colors"})]},o.value))})]},"grade-select"),i&&!h&&e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-800 mb-6 text-center",children:"é€‰æ‹©æµ‹è¯•æ¿å—"}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:B.map(o=>{const N=m(o.icon),t=l(o.value);return e.jsxs(j.button,{whileHover:t?{scale:1.02}:{},whileTap:t?{scale:.98}:{},onClick:()=>t&&y(o.value),disabled:!t,className:`bg-white rounded-2xl p-6 shadow-sm border transition-all text-left ${t?"border-slate-100 hover:border-primary-300 hover:shadow-md cursor-pointer":"border-slate-100 opacity-50 cursor-not-allowed"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center mb-4 ${t?"bg-primary-100":"bg-slate-100"}`,children:e.jsx(N,{className:`w-6 h-6 ${t?"text-primary-600":"text-slate-400"}`})}),e.jsx("div",{className:"text-base font-semibold text-slate-800 mb-1",children:o.label}),e.jsx("div",{className:"text-sm text-slate-500 mb-3",children:o.labelZh}),t?e.jsxs("div",{className:"text-xs text-primary-600 font-medium",children:[o.value==="reading"&&`${a==null?void 0:a.reading.passages.length} ç¯‡æ–‡ç«  Â· ${a==null?void 0:a.reading.timeLimit} åˆ†é’Ÿ`,o.value==="grammar"&&`${a==null?void 0:a.grammar.questions.length} é“é¢˜ Â· ${a==null?void 0:a.grammar.timeLimit} åˆ†é’Ÿ`,o.value==="vocabulary"&&`${a==null?void 0:a.vocabulary.questions.length} é“é¢˜ Â· ${a==null?void 0:a.vocabulary.timeLimit} åˆ†é’Ÿ`,o.value==="writing"&&`${a==null?void 0:a.writing.tasks.length} ç¯‡ä½œæ–‡ Â· ${a==null?void 0:a.writing.timeLimit} åˆ†é’Ÿ`]}):e.jsx("div",{className:"text-xs text-slate-400",children:"æš‚æ— é¢˜ç›®"})]},o.value)})})]},"section-select"),i&&h&&a&&e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[h==="reading"&&e.jsx(ae,{passages:a.reading.passages,timeLimit:a.reading.timeLimit,onBack:()=>y(null)}),h==="grammar"&&e.jsx(re,{questions:a.grammar.questions,timeLimit:a.grammar.timeLimit,onBack:()=>y(null)}),h==="vocabulary"&&e.jsx(ie,{questions:a.vocabulary.questions,timeLimit:a.vocabulary.timeLimit,onBack:()=>y(null)}),h==="writing"&&e.jsx(oe,{tasks:a.writing.tasks,grade:i,onBack:()=>y(null)})]},"test-content")]})]})})]})}export{je as default};
