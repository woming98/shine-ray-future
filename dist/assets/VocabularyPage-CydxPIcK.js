import{r as o,j as e,X as C,B as N,A as k,m as S}from"./index-BMvr2Q3z.js";import{u as F}from"./useStore-BLrCrgBZ.js";import{C as j,B as m}from"./Button-pqDR0Cbl.js";import{V as I}from"./volume-2-V3PI-oVv.js";import{C as w}from"./check-circle-C5mn4RTd.js";import{C as M}from"./chevron-left-CuOLKypr.js";import{R as P}from"./rotate-ccw-BC9kiXBq.js";import{C as R}from"./chevron-right-AIw1T69N.js";import{P as V}from"./play-BIQoX-S_.js";import{F as W}from"./filter-BnXij0ur.js";import"./middleware-dtXbDlhF.js";import"./useGlobalUser-DSzfZyT8.js";const v=[{id:"vocab-001",word:"significant",phonetic:"/sɪɡˈnɪfɪkənt/",partOfSpeech:"adjective",definitions:[{meaning:"重要的，重大的",example:"Reading has a significant impact on language learning."},{meaning:"显著的",example:"There was a significant increase in test scores."}],difficulty:"medium",topic:"academic",tags:["formal","academic"]},{id:"vocab-002",word:"enhance",phonetic:"/ɪnˈhæns/",partOfSpeech:"verb",definitions:[{meaning:"提高，增强",example:"Regular exercise can enhance your health."}],difficulty:"medium",topic:"general",tags:["formal"]},{id:"vocab-003",word:"comprehend",phonetic:"/ˌkɒmprɪˈhend/",partOfSpeech:"verb",definitions:[{meaning:"理解，领会",example:"It is difficult to comprehend such complex ideas."}],difficulty:"hard",topic:"academic",tags:["formal","academic"]}];function B({word:t,onMaster:d,onRemove:c,showActions:r=!0}){const[x,l]=o.useState(!1),h=()=>{if("speechSynthesis"in window){const a=new SpeechSynthesisUtterance(t.word);a.lang="en-US",window.speechSynthesis.speak(a)}};return e.jsxs(j,{className:"p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:t.word}),t.phonetic&&e.jsxs("span",{className:"text-sm text-gray-500",children:["/",t.phonetic,"/"]}),e.jsx("button",{onClick:h,className:"p-1 rounded hover:bg-emerald-100 transition-colors",children:e.jsx(I,{className:"w-4 h-4 text-emerald-600"})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-700 rounded text-xs font-medium",children:t.partOfSpeech}),t.difficulty&&e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.difficulty==="easy"?"bg-green-100 text-green-700":t.difficulty==="medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:t.difficulty})]})]}),r&&c&&e.jsx("button",{onClick:()=>c(t.id),className:"p-1 rounded hover:bg-red-100 transition-colors",children:e.jsx(C,{className:"w-4 h-4 text-red-600"})})]}),x?e.jsxs("div",{className:"space-y-3",children:[t.definitions.map((a,i)=>e.jsxs("div",{className:"border-l-4 border-emerald-500 pl-4",children:[e.jsx("p",{className:"text-gray-700 mb-1",children:a.meaning}),a.example&&e.jsxs("p",{className:"text-sm text-gray-600 italic",children:["例：",a.example]})]},i)),r&&e.jsxs("div",{className:"flex gap-2 mt-4",children:[d&&e.jsx(m,{size:"sm",variant:"secondary",onClick:()=>d(t.id),icon:e.jsx(w,{className:"w-4 h-4"}),children:"标记已掌握"}),e.jsx(m,{size:"sm",variant:"ghost",onClick:()=>l(!1),children:"收起"})]})]}):e.jsx(m,{variant:"ghost",onClick:()=>l(!0),icon:e.jsx(N,{className:"w-4 h-4"}),children:"查看定义"})]})}function O({words:t,onMaster:d}){const[c,r]=o.useState(0),[x,l]=o.useState(!1),[h,a]=o.useState(new Set),i=t[c],g=()=>{l(!1),c<t.length-1?r(n=>n+1):r(0)},f=()=>{l(!1),c>0?r(n=>n-1):r(t.length-1)},p=()=>{i&&d&&(d(i.id),a(n=>new Set([...n,i.id])),g())};return t.length===0?e.jsx(j,{className:"p-12 text-center",children:e.jsx("p",{className:"text-gray-600",children:"没有词汇可以复习"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["进度：",c+1," / ",t.length]}),e.jsxs("div",{className:"text-sm text-emerald-600",children:["已掌握：",h.size," / ",t.length]})]}),e.jsx("div",{className:"relative h-96",children:e.jsx(k,{mode:"wait",children:e.jsx(S.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"absolute inset-0",children:e.jsx(j,{className:"h-full cursor-pointer",onClick:()=>l(!x),children:e.jsx("div",{className:"h-full flex items-center justify-center p-8",children:x?e.jsxs("div",{className:"text-center max-w-2xl",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:i.word}),e.jsx("div",{className:"space-y-4",children:i.definitions.map((n,y)=>e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-lg text-gray-700 mb-2",children:n.meaning}),n.example&&e.jsxs("p",{className:"text-sm text-gray-600 italic",children:["例：",n.example]})]},y))}),e.jsx("p",{className:"text-sm text-gray-400 mt-6",children:"点击卡片返回"})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:i.word}),i.phonetic&&e.jsxs("p",{className:"text-xl text-gray-500",children:["/",i.phonetic,"/"]}),e.jsx("p",{className:"text-sm text-gray-400 mt-4",children:"点击卡片查看定义"})]})})})},i.id)})}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx(m,{variant:"secondary",onClick:f,icon:e.jsx(M,{className:"w-4 h-4"}),children:"上一张"}),e.jsx(m,{variant:"secondary",onClick:()=>l(!x),icon:e.jsx(P,{className:"w-4 h-4"}),children:"翻转"}),d&&e.jsx(m,{onClick:p,icon:e.jsx(w,{className:"w-4 h-4"}),children:"已掌握"}),e.jsx(m,{variant:"secondary",onClick:g,icon:e.jsx(R,{className:"w-4 h-4"}),children:"下一张"})]})]})}function J(){const{vocabularyBook:t,removeFromVocabularyBook:d,markWordAsMastered:c}=F(),[r,x]=o.useState("list"),[l,h]=o.useState("all"),[a,i]=o.useState("all"),g=(t==null?void 0:t.words.map(s=>s.wordId))||[],f=v.filter(s=>g.includes(s.id)),p=o.useMemo(()=>{let s=f;return l!=="all"&&(s=s.filter(u=>u.difficulty===l)),a!=="all"&&(s=s.filter(u=>u.topic===a)),s},[f,l,a]),n=o.useMemo(()=>Array.from(new Set(v.map(s=>s.topic).filter(s=>!!s))),[]),y=s=>{d(s)},b=s=>{c(s)};return e.jsx("div",{className:"space-y-6",children:e.jsxs(j,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(N,{className:"w-6 h-6 text-emerald-600"}),"词汇本"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:r==="list"?"primary":"secondary",onClick:()=>x("list"),children:"列表模式"}),e.jsx(m,{variant:r==="flashcard"?"primary":"secondary",onClick:()=>x("flashcard"),icon:e.jsx(V,{className:"w-4 h-4"}),children:"闪卡模式"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"筛选："})]}),e.jsx("button",{onClick:()=>h("all"),className:`px-3 py-1 rounded-lg text-sm transition-colors ${l==="all"?"bg-emerald-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"全部难度"}),["easy","medium","hard"].map(s=>e.jsx("button",{onClick:()=>h(s),className:`px-3 py-1 rounded-lg text-sm transition-colors ${l===s?"bg-emerald-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s},s)),n.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>i("all"),className:`px-3 py-1 rounded-lg text-sm transition-colors ${a==="all"?"bg-emerald-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"全部主题"}),n.map(s=>e.jsx("button",{onClick:()=>i(s),className:`px-3 py-1 rounded-lg text-sm transition-colors ${a===s?"bg-emerald-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s},s))]})]}),r==="flashcard"?e.jsx(O,{words:p,onMaster:b}):e.jsx(e.Fragment,{children:p.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"词汇本为空"}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"在阅读练习中点击词汇添加到词汇本"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(s=>e.jsx(B,{word:s,onMaster:b,onRemove:y},s.id))})})]})})}export{J as default};
